"use strict";function _classCallCheck(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,n){for(var o=0;o<n.length;o++){var t=n[o];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(e,t.key,t)}}function _createClass(e,n,o){return n&&_defineProperties(e.prototype,n),o&&_defineProperties(e,o),e}define(["jquery","cookie","session"],function(){return new(function(){function n(){var e=this;_classCallCheck(this,n),this.loadHTML().then(function(){e.calcTotalCount(),e.jumpToReg(),e.jumpToLog(),e.statusTab(),e.logOut(),e.getCenter(),e.wxShop(),e.search()})}return _createClass(n,[{key:"loadHTML",value:function(){return new Promise(function(e,n){$("header").load("/html/modules/header.html",function(){e()})})}},{key:"calcTotalCount",value:function(){var e=0,n=JSON.parse(localStorage.getItem("cart"));n&&(e=n.reduce(function(e,n){return n.check&&(e+=n.count),e},0)),$(".amount").html(e)}},{key:"jumpToReg",value:function(){$(".register").on("click",function(){window.open("/html/register.html","_self")})}},{key:"jumpToLog",value:function(){$(".login").on("click",function(){window.open("/html/login.html","_self")})}},{key:"statusTab",value:function(){var e=$("#unlogin"),n=$("#islogin"),o=$.cookie("username"),t=$.session.get("username"),i=o||t;i&&(e.hide(),n.show(),n.children().eq(0).html(i))}},{key:"logOut",value:function(){var e=$("#unlogin"),n=$("#islogin");$(".logout").on("click",function(){confirm("您确定要退出吗？")&&$.removeCookie("username",{path:"/"}),$.session.remove("username"),e.show(),n.hide()})}},{key:"getCenter",value:function(){$(".getcenter").on("click",function(e){alert("当前暂无可领取的礼包哦！"),e.preventDefault()})}},{key:"wxShop",value:function(){$(".weixin").hover(function(){$(this).children("#code").show(),$(this).children(".arrow").css("background-position","-23px 0")},function(){$(this).children("#code").hover(function(){$(this).children("#code").show()},function(){$(this).hide(),$(this).prev().css("background-position","-32px 0")})})}},{key:"search",value:function(){$("#soinp").focus(function(){$(this).next().children().hide()}),$("#soinp").blur(function(){$(this).next().children().show()})}},{key:"cancel",value:function(){console.log($(".index")),$(".index").removeClass("active")}}]),n}())});