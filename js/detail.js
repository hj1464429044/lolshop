"use strict";function ownKeys(t,e){var o,r=Object.keys(t);return Object.getOwnPropertySymbols&&(o=Object.getOwnPropertySymbols(t),e&&(o=o.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),r.push.apply(r,o)),r}function _objectSpread(t){for(var e=1;e<arguments.length;e++){var o=null!=arguments[e]?arguments[e]:{};e%2?ownKeys(Object(o),!0).forEach(function(e){_defineProperty(t,e,o[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(o)):ownKeys(Object(o)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(o,e))})}return t}function _defineProperty(e,t,o){return t in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var o=0;o<t.length;o++){var r=t[o];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _createClass(e,t,o){return t&&_defineProperties(e.prototype,t),o&&_defineProperties(e,o),e}require(["./config"],function(){require(["template","header","contents","footer","kefu","elevatezoom","fly"],function(s,r){new(function(){function t(){var e=this;_classCallCheck(this,t),this.render().then(function(){e.zoom(),e.addToCart()})}return _createClass(t,[{key:"zoom",value:function(){$(".zoom-image").elevateZoom({gallery:"gal1",zoomWindowHeight:375}),$("#gal1 li:first-child a").addClass("zoomGalleryActive")}},{key:"render",value:function(){var l=this,f=parseInt(location.search.slice(4));return new Promise(function(t,e){$.get("/libs/json/list.json",{id:f},function(e){200===e.code&&e.body.forEach(function(e){e.list.forEach(function(e){var t,o,r,n,i,a,c;e.goodid===f&&(t=e.goodid,o=e.ltimg,r=e.frontimg,n=e.hoverimg,i=e.title,a=e.price,c=e.details,l.detailinfo={goodid:t,ltimg:o,frontimg:r,hoverimg:n,title:i,price:a,details:c},$("#detailinfo").html(s("detailinfoTemplate",_objectSpread({},l.detailinfo))))})}),t()})})}},{key:"addToCart",value:function(){var o=this;$("#add-to-cart-btn").on("click",function(e){e.preventDefault(),o.fly(e);var t=localStorage.getItem("cart");t?((t=JSON.parse(t)).some(function(e){return e.goodid===o.detailinfo.goodid})?t=t.map(function(e){return e.goodid===o.detailinfo.goodid&&e.count++,e}):t.push(_objectSpread(_objectSpread({},o.detailinfo),{},{count:1,check:!0})),localStorage.setItem("cart",JSON.stringify(t))):localStorage.setItem("cart",JSON.stringify([_objectSpread(_objectSpread({},o.detailinfo),{},{count:1,check:!0})])),r.calcTotalCount()})}},{key:"fly",value:function(e){$('<div class="fly">').fly({start:{left:e.clientX-20,top:e.clientY-20},end:{left:$(".cart").offset().left+70,top:$(".cart").offset().top-400},speed:1.1,vertex_Rtop:1e3,onEnd:function(){this.destroy()}})}}]),t}())})});